@page "/MyProfilePage/{userId:int}"
@using Core
@using EksamensProjekt.Service
@inject ILogin LoginService
@inject NavigationManager nav
@inject IUser mService

@if (user == null)
{
    <p>Indlæser profil ..</p>
}
else
{
    <h3>@user.Name's profil</h3><br/>
    <img src="@user.ProfilePicture"/>
    <h4>@user.Role</h4><br/>
    <h4>@user.UserId</h4>

}


@code {
    [Parameter]
    public int userId { get; set; }
    
    private User user;
    private User? currentUser;

    
    protected override async Task OnInitializedAsync()
    {
        currentUser = await LoginService.GetUserLoggedIn();

        if (currentUser == null ||
            (currentUser.Role != "Admin" && currentUser.Role != "Køkkenchef"))
        {
            nav.NavigateTo("/");
            return;
        }

        user = await mService.GetUserById(userId);
    }
}